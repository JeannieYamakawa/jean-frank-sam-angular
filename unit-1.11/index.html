<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Angular App</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular-animate.js"></script>

    <script src = 'app.js'charset="UTF-8"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css">

</head>
<body ng-app = 'firstReddit'>
            <div ng-controller = 'reddit'>

                <!-- nav bar -->
                <div class = 'well well-lg navbar'>
                    <div class='col-xs-3'>
                        <span id = 'redditHeader' >Reddit</span>
                    </div>
                    <div class='col-xs-3'>
                        <input ng-click="newPostClicked()"  type='button' value = 'New Post' >
                    </div>
                    <div class='col-xs-3'>
                        <input type="text"  placeholder = 'Search...'>
                    </div>
                    <div class='col-xs-3'>
                        <span  >Sort By:</span>

                        <select  name="dropdown" ng-model ='dropMenu' >
                            <option value="" selected hidden />
                            <option value="-date" >Date</option>
                            <option value="-numberOfVotes">Votes</option>
                            <option value="title">Title</option>
                        </select>
                    </div>

                </div>
                <!-- end of nav bar -->


        <div class='col-xs-12'>
        <div ng-show= "myValue">
            <form name="userForm" novalidate ng-submit = 'userFormSubmit()'>

                <label for="author">Author's Name:</label>
                    <input id = 'author' type="text" ng-model = 'postInputFields.author'  name="author" required ng-minlength=3 ng-maxlength=20>


                     <div class="error" ng-show="userForm.author.$dirty && userForm.author.$invalid">
                          <small class="error" ng-show="userForm.author.$error.required">Your name is required.</small>
                          <small class="error" ng-show="userForm.author.$error.minlength">Your name is required to be at least 3 characters</small>
                          <small class="error" ng-show="userForm.author.$error.maxlength">Your name cannot be longer than 20 characters</small>
                    </div>
                <br>









                <label for="title">Post Title:</label>
                    <input id = 'title' type="text" name="title" ng-model = 'postInputFields.title'  required ng-minlength=8 ng-maxlength=50>

                    <div class="error" ng-show="userForm.title.$dirty && userForm.title.$invalid">
                         <small class="error" ng-show="userForm.title.$error.required">Post title is required.</small>
                         <small class="error" ng-show="userForm.title.$error.minlength">Post title is required to be at least 8 characters</small>
                         <small class="error" ng-show="userForm.title.$error.maxlength">Post title cannot be longer than 50 characters</small>
                   </div>

                    <br>
                <label for="image">Image Address:</label>
                    <input id = 'image' type="text" ng-model = 'postInputFields.image' required>

                    <br>
                <label for="description">Post Description:</label>
                    <input id = 'description' type="text" ng-model = 'postInputFields.description' required>
                <br>
            <button ng-disabled="userForm.$invalid" type="submit" ng-click = 'addPost(postInputFields.title, postInputFields.author, postInputFields.image, postInputFields.description)'> Submit Post </button>

            </form>
        </div>


<!-- ng pluralize count = post.comments.length
when {'0': '0 comments',
        '1': '1 comment',
        ______
    } -->
                <div class='col-xs-12 '>

                    <ul>

                        <!-- for each post -->
                            <li  class = 'panel panel-default'ng-repeat='post in postList.posts | orderBy: dropMenu'>

                                <div >
                                    <header class = 'panel panel-title col-xs-12'>
                                        <strong>{{ post.title }}  | </strong>

                                        <span ng-click="upClicked(post)" id = 'upArrow'>&#65514;</span>


                                        <span ng-if='post.numberOfVotes<0'>
                                            <span class = 'red'>votes:{{ post.numberOfVotes }}</span>
                                        </span>
                                        <span ng-if='post.numberOfVotes==0'>
                                            <span class = 'gray'>votes:{{ post.numberOfVotes }}</span>
                                        </span>
                                        <span ng-if='post.numberOfVotes>0'>
                                            <span class = 'green'>votes:{{ post.numberOfVotes }}</span>
                                        </span>


                                        <span ng-click="downClicked(post)" id = 'downArrow'>&#65516;</span>

                                        <span class = 'author' >By: {{ post.author }}</span>
                                    </header>





                                <br>

                                <main class ='row mainPost'>
                                    <img class = 'col-xs-1' src="{{ post.image }}" alt="cute kitten"/>

                                    <span class = 'col-xs-11'> {{ post.description }}</span>
                                </main>

                                <p class = 'commentRow'>
                                    <span >{{ post.date | date: 'short' }}</span>
                                    <button class = 'commentButtonPad' ><strong>(View) Comments</strong></button>
                                    <button class = 'commentButtonPad'><strong>Add Comment</strong></button>
                                </p>
                                </div>

                            </li>
                        <!-- end of each post -->


                    </ul>
                </div>
            </div>
</body>
</html>
